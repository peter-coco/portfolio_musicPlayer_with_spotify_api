(this.webpackJsonpmusicplayer2=this.webpackJsonpmusicplayer2||[]).push([[0],{102:function(t,e){},119:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),c=n(11),r=n.n(c),o=(n(57),n(5)),s=(n(64),n(121)),l=n(1),d="https://accounts.spotify.com/authorize?client_id=e4ef76d98ff348cfbe2fe41f11d87279&response_type=code&redirect_uri=https://coco-peter.github.io/portfolio_musicPlayer_with_spotify_api/&scope=streaming%20user-read-email%20user-read-private%20user-library-read%20user-library-modify%20user-read-playback-state%20user-modify-playback-state%20playlist-modify-public%20playlist-modify-private";function p(){return console.log(d),Object(l.jsx)(s.a,{className:"d-flex justify-content-center align-items-center",style:{minHeight:"100vh",minWidth:"100vw",background:"linear-gradient(\n                      90deg,\n                      #38adae -1.77%,\n                      #cd295a 103.5%,\n                      rgba(254, 144, 175, 0) 103.51%\n                    )"},children:Object(l.jsx)("a",{className:"btn btn-success btn-lg",href:d,style:{backgroundColor:"#1b1b1b",border:"0px"},children:"Login With Spotify"})})}var O,u=n(3);!function(t){t[t.CHANGE_MAIN_CONTENTS_MODE_TO_MAIN=0]="CHANGE_MAIN_CONTENTS_MODE_TO_MAIN",t[t.CHANGE_MAIN_CONTENTS_MODE_TO_GENRE=1]="CHANGE_MAIN_CONTENTS_MODE_TO_GENRE",t[t.CHANGE_MAIN_CONTENTS_MODE_TO_MYLIST=2]="CHANGE_MAIN_CONTENTS_MODE_TO_MYLIST",t[t.CHANGE_MAIN_CONTENTS_MODE_TO_SEARCH=3]="CHANGE_MAIN_CONTENTS_MODE_TO_SEARCH",t[t.SET_API_ENTRACE_CODE=4]="SET_API_ENTRACE_CODE",t[t.SET_TRACK_LIST=5]="SET_TRACK_LIST",t[t.SET_SEARCH_RESULT=6]="SET_SEARCH_RESULT",t[t.SET_SEARCH_ENTER_ACTIVATED=7]="SET_SEARCH_ENTER_ACTIVATED",t[t.SET_ACCEES_TOKEN_NOW=8]="SET_ACCEES_TOKEN_NOW",t[t.SET_MYLIST_ID=9]="SET_MYLIST_ID",t[t.SET_PLAYING_NOW_LIST_ID=10]="SET_PLAYING_NOW_LIST_ID",t[t.SET_ADD_MUSIC_TO_MYLIST=11]="SET_ADD_MUSIC_TO_MYLIST",t[t.SET_SUB_MUSIC_FROM_MYLIST=12]="SET_SUB_MUSIC_FROM_MYLIST",t[t.CHOICE_MUSIC_GENRE=13]="CHOICE_MUSIC_GENRE",t[t.CHOICE_PLAY_MUSIC_NOW=14]="CHOICE_PLAY_MUSIC_NOW"}(O||(O={}));var f,h,_,b,x,m,j,E,T,C,y,S,N,I,g,M,w=O,A=n(4),v=n(37),k=A.a.div(f||(f=Object(u.a)(["\n  width: 100%;\n  height: 10vh;\n  min-height: 60px;\n  /* position: absolute; */\n  /* top: 0; */\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),L=A.a.div(h||(h=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  width: 560px;\n  height: 30px;\n  @media (max-width: 750px) {\n    width: 200px;\n  }\n"]))),R=A.a.i(_||(_=Object(u.a)(["\n  font-size: 25px;\n  line-height: 30px;\n  color: #fff;\n  cursor: pointer;\n  @media (max-width: 750px) {\n    font-size: 20px;\n  }\n  @media (max-width: 350px) {\n    font-size: 15px;\n  }\n"]))),D=A.a.div(b||(b=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  width: 300px;\n  height: 30px;\n\n  @media (max-width: 750px) {\n    width: 200px;\n  }\n"]))),H=A.a.input(x||(x=Object(u.a)(["\n  width: 100%;\n  height: 100%;\n"]))),G=function(){var t=Object(o.b)();return Object(l.jsxs)(L,{children:[Object(l.jsx)(R,{className:"fas fa-home",onClick:function(){t({type:w.CHANGE_MAIN_CONTENTS_MODE_TO_MAIN})}}),Object(l.jsx)(R,{className:"fas fa-chart-bar",onClick:function(){t({type:w.CHANGE_MAIN_CONTENTS_MODE_TO_GENRE})}}),Object(l.jsx)(R,{className:"fas fa-list-alt",onClick:function(){t({type:w.CHANGE_MAIN_CONTENTS_MODE_TO_MYLIST})}}),Object(l.jsx)(R,{className:"fas fa-search",onClick:function(){t({type:w.CHANGE_MAIN_CONTENTS_MODE_TO_SEARCH,payload:{searchBarOnOff:!0}})}})]})},B=function(){var t=Object(o.b)();return Object(l.jsx)(D,{children:Object(l.jsx)(H,{onChange:function(e){t({type:w.SET_SEARCH_RESULT,payload:{searchResult:e.target.value}})},onKeyDown:function(e){"Enter"===e.key&&t({type:w.SET_SEARCH_ENTER_ACTIVATED})}})})},U=function(){var t=Object(o.c)((function(t){return t.searchBarOnOff})),e=Object(o.b)();return t?Object(l.jsx)(k,{children:Object(l.jsx)(v.a,{onOutsideClick:function(){e({type:w.CHANGE_MAIN_CONTENTS_MODE_TO_SEARCH,payload:{searchBarOnOff:!1}})},children:Object(l.jsx)(B,{})})}):Object(l.jsx)(k,{children:Object(l.jsx)(G,{})})},P=n(7),Y=n(51),z=A.a.div(m||(m=Object(u.a)(["\n  width: 100%;\n  height: 10vh;\n  min-height: 60px;\n"]))),W=function(){var t=Object(o.c)((function(t){return t.trackNow})),e=Object(o.c)((function(t){return[t.accessTokenNow]})),n=Object(P.a)(e,1)[0],i=Object(a.useState)(!1),c=Object(P.a)(i,2),r=c[0],s=c[1];return Object(a.useEffect)((function(){return s(!0)}),[t.url]),n?Object(l.jsx)(z,{children:Object(l.jsx)(Y.a,{token:n,showSaveIcon:!0,callback:function(t){t.isPlaying||s(!1)},play:r,uris:t.url?[t.url]:[]})}):null},F=A.a.div(j||(j=Object(u.a)(["\n  width: 100%;\n  height: 80%;\n  grid-template-columns: 1fr 1fr 1fr;\n  overflow-y: scroll;\n\n  @media (max-width: 750px) {\n    grid-template-columns: 1fr 1fr;\n  }\n"]))),K=A.a.div(E||(E=Object(u.a)(["\n  width: 200px;\n  height: 50px;\n  background-color: #1b1b1b;\n  color: #fff;\n  /* margin-right: 50px; */\n  text-align: center;\n  line-height: 50px;\n  font-size: 16px;\n\n  cursor: pointer;\n  @media (max-width: 750px) {\n    width: 130px;\n    height: 40px;\n    line-height: 40px;\n    font-size: 15px;\n\n    /* margin-right: 30px; */\n  }\n\n  @media (max-width: 350px) {\n    width: 100px;\n    height: 30px;\n    line-height: 30px;\n    font-size: 13px;\n  }\n"]))),V=function(t){var e=t.musicGenre,n=Object(o.b)();return Object(l.jsx)(K,{onClick:function(){n({type:w.CHOICE_MUSIC_GENRE,payload:{genre:e,nameOfTitle:e}})},children:e})},J=function(){var t=Object(o.c)((function(t){return t.mainContentsModeIdx}));return Object(l.jsx)(F,{style:{display:1===t?"grid":"none"},children:["k-pop","pop","j-pop","rock","classical","jazz","dance","edm","acoustic"].map((function(t){return Object(l.jsx)(V,{musicGenre:t},t)}))})},q=n(19),Q=n.n(q);var X,Z,$,tt,et,nt,at=A.a.div(T||(T=Object(u.a)(["\n  width: 100%;\n  height: 80%;\n  grid-template-columns: 1fr 1fr;\n  overflow-y: scroll;\n  /* overflow-x: hidden; */\n\n  @media (max-width: 750px) {\n    grid-template-columns: 1fr;\n  }\n"]))),it=A.a.div(C||(C=Object(u.a)(["\n  width: 100%;\n  height: 80px;\n  display: flex;\n  position: relative;\n  align-items: center;\n  margin-right: 30px;\n  @media (max-width: 750px) {\n    width: 100%;\n    height: 40px;\n    margin-bottom: 20px;\n    margin-right: 0%;\n  }\n  @media (max-width: 350px) {\n    height: 35px;\n    margin-bottom: 15px;\n  }\n"]))),ct=A.a.img(y||(y=Object(u.a)(["\n  width: 50px;\n  height: 50px;\n  margin-right: 20px;\n  @media (max-width: 750px) {\n    width: 40px;\n    height: 40px;\n    margin-right: 20px;\n  }\n  @media (max-width: 350px) {\n    width: 35px;\n    height: 35px;\n    margin-right: 15px;\n  }\n"]))),rt=A.a.div(S||(S=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]))),ot=A.a.div(N||(N=Object(u.a)(["\n  color: #fff;\n  font-size: 18px;\n  /* width: 300px; */\n\n  width: 200px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n\n  @media (max-width: 750px) {\n    font-size: 15px;\n    width: 220px;\n  }\n\n  @media (max-width: 350px) {\n    font-size: 13px;\n    width: 150px;\n  }\n"]))),st=A.a.div(I||(I=Object(u.a)(["\n  color: #cacaca;\n  font-size: 18px;\n\n  width: 200px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  /* width: 100%; */\n  @media (max-width: 750px) {\n    font-size: 15px;\n    width: 220px;\n  }\n\n  @media (max-width: 350px) {\n    font-size: 13px;\n    width: 150px;\n  }\n"]))),lt=A.a.div(g||(g=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 30px;\n  position: absolute;\n  background-color: #1b1b1b;\n  width: 80%;\n  height: 100%;\n  opacity: 0;\n  &:hover {\n    opacity: 0.5;\n  }\n"]))),dt=A.a.i(M||(M=Object(u.a)(["\n  font-size: 20px;\n  color: #fff;\n  line-height: 30px;\n  cursor: pointer;\n\n  &:hover {\n    color: #975f31;\n  }\n  @media (max-width: 750px) {\n    font-size: 15px;\n    margin-left: 20px;\n    /* line-height: 30px; */\n  }\n\n  @media (max-width: 350px) {\n    font-size: 10px;\n  }\n"]))),pt=function(t){var e=t.track,n=Object(o.b)(),a=Object(o.c)((function(t){return[t.spotifyApi,t.myListId,t.playingListId]})),i=Object(P.a)(a,3),c=i[0],r=i[1];i[2];return Object(l.jsxs)(it,{children:[Object(l.jsx)(ct,{src:e.albumImg}),Object(l.jsxs)(rt,{children:[Object(l.jsx)(ot,{children:e.title}),Object(l.jsxs)(st,{children:[e.artist," / ",e.album]})]}),Object(l.jsxs)(lt,{children:[Object(l.jsx)(dt,{className:"fas fa-play",onClick:function(){n({type:w.CHOICE_PLAY_MUSIC_NOW,payload:{trackNow:e}})}}),Object(l.jsx)(dt,{className:"fas fa-thumbs-up"}),Object(l.jsx)(dt,{className:"fas fa-plus",onClick:function(){r&&c.addTracksToPlaylist(r,[e.url]).then((function(t){n({type:w.SET_ADD_MUSIC_TO_MYLIST})}))}}),Object(l.jsx)(dt,{className:"fas fa-minus",onClick:function(){r&&c.removeTracksFromPlaylist(r,[{uri:e.url}]).then((function(t){n({type:w.SET_SUB_MUSIC_FROM_MYLIST})}))}})]})]})},Ot=function(){var t=Object(o.b)(),e=Object(o.c)((function(t){return[t.entraceCode,t.selectedMusicGenre,t.searchResult,t.searchBarEnterOnOff,t.trackList,t.mainContentsModeIdx,t.spotifyApi,t.myListId,t.addMusicToMylist,t.subMusicFromMylist]})),n=Object(P.a)(e,10),i=n[0],c=n[1],r=n[2],s=n[3],d=n[4],p=n[5],O=n[6],u=n[7],f=n[8],h=n[9],_=function(t){var e=Object(a.useState)(""),n=Object(P.a)(e,2),i=n[0],c=n[1],r=Object(a.useState)(""),s=Object(P.a)(r,2),l=s[0],d=s[1],p=Object(a.useState)(0),O=Object(P.a)(p,2),u=O[0],f=O[1],h=Object(o.b)();return Object(a.useEffect)((function(){Q.a.post("https://musicdata.link/login",{code:t}).then((function(t){c(t.data.accessToken),d(t.data.refreshToken),f(t.data.expiresIn)})).catch((function(){h({type:w.SET_API_ENTRACE_CODE,payload:{apiEntraceCode:""}}),window.location.href="/"}))}),[t]),Object(a.useEffect)((function(){if(l&&u){var t=setInterval((function(){Q.a.post("https://musicdata.link/refresh",{refreshToken:l}).then((function(t){c(t.data.accessToken),f(t.data.expiresIn),window.history.pushState({},"","/")})).catch((function(){window.location.href="/"}))}),1e3*(u-60));return function(){return clearInterval(t)}}}),[l,u]),i}(i);return Object(a.useEffect)((function(){_&&(O.setAccessToken(_),t({type:w.SET_ACCEES_TOKEN_NOW,payload:{accessTokenNow:_}}))}),[_]),Object(a.useEffect)((function(){r&&3===p&&O.searchTracks(r).then((function(e){var n,a=null===(n=e.body.tracks)||void 0===n?void 0:n.items.map((function(t){return{title:t.name,artist:t.artists[0].name,album:t.album.name,albumImg:t.album.images[0].url,popularity:t.popularity,url:t.uri}}));t({type:w.SET_TRACK_LIST,payload:{trackList:a||[]}})}))}),[s]),Object(a.useEffect)((function(){u&&2===p&&O.getPlaylist(u).then((function(e){var n=e.body.tracks.items.map((function(t){return{title:t.track.name,artist:t.track.artists[0].name,album:t.track.album.name,albumImg:t.track.album.images[0].url,popularity:t.track.popularity,url:t.track.uri}}));t({type:w.SET_TRACK_LIST,payload:{trackList:n||[]}})}))}),[u,p,f,h]),Object(a.useEffect)((function(){_&&(O.createPlaylist("My playlist",{description:"My favorite music list"}).then((function(e){t({type:w.SET_MYLIST_ID,payload:{myListId:e.body.id}})})),O.createPlaylist("playing now list",{description:"My playlist what i listened once"}).then((function(e){t({type:w.SET_PLAYING_NOW_LIST_ID,payload:e.body.id})})))}),[_]),Object(a.useEffect)((function(){_&&0===p&&O.getRecommendations({seed_genres:["".concat(c)]}).then((function(e){var n=e.body.tracks.map((function(t){return{title:t.name,artist:t.artists[0].name,album:t.album.name,albumImg:t.album.images[0].url,popularity:t.popularity,url:t.uri}}));t({type:w.SET_TRACK_LIST,payload:{trackList:n||[]}})}))}),[c,_,p]),Object(l.jsx)(at,{style:{display:1!==p?"grid":"none"},children:d.sort((function(t,e){return e.popularity-t.popularity})).map((function(t){return Object(l.jsx)(pt,{track:t},t.title+t.artist+t.album+t.url)}))})},ut=A.a.div(X||(X=Object(u.a)(["\n  width: 100%;\n  height: 80vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0 20px;\n  box-sizing: border-box;\n"]))),ft=A.a.div(Z||(Z=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 90%;\n  height: 80%;\n"]))),ht=A.a.div($||($=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 300px;\n  height: 60px;\n  margin-bottom: 10px;\n  @media (max-width: 750px) {\n    width: 280px;\n    height: 40px;\n    margin-bottom: 35px;\n  }\n\n  @media (max-width: 350px) {\n    width: 250px;\n\n    margin-bottom: 20px;\n  }\n"]))),_t=A.a.div(tt||(tt=Object(u.a)(["\n  color: #fff;\n  font-size: 25px;\n  @media (max-width: 750px) {\n    font-size: 20px;\n  }\n\n  @media (max-width: 350px) {\n    font-size: 18px;\n  }\n"]))),bt=A.a.div(et||(et=Object(u.a)(["\n  width: 100%;\n  height: 4px;\n\n  @media (max-width: 750px) {\n    height: 3px;\n    width: 90%;\n  }\n\n  @media (max-width: 350px) {\n    width: 80%;\n    height: 2px;\n  }\n"]))),xt=function(t){var e=t.title,n=t.barColor;return Object(l.jsxs)(ht,{children:[Object(l.jsx)(_t,{children:e}),Object(l.jsx)(bt,{style:{backgroundColor:"".concat(n)}})]})},mt=function(){var t=Object(o.c)((function(t){return[t.nameOfTitle,t.colorOfTitleBar]})),e=Object(P.a)(t,2),n=e[0],a=e[1];return Object(l.jsx)(ut,{children:Object(l.jsxs)(ft,{children:[Object(l.jsx)(xt,{title:n,barColor:a}),Object(l.jsx)(J,{}),Object(l.jsx)(Ot,{})]})})},jt=A.a.div(nt||(nt=Object(u.a)(["\n  width: 100vw;\n  height: 100vh;\n  /* position: fixed; // \uc74c... \uc774\uc804\uc5d0 \uc5b4\ub5bb\uac8c \ud588\uc9c0?? */\n  background: linear-gradient(\n    90deg,\n    #38adae -1.77%,\n    #cd295a 103.5%,\n    rgba(254, 144, 175, 0) 103.51%\n  );\n"])));function Et(t){var e=t.code,n=Object(o.b)();return Object(a.useEffect)((function(){n({type:w.SET_API_ENTRACE_CODE,payload:{apiEntraceCode:e}})}),[e]),Object(l.jsxs)(jt,{children:[Object(l.jsx)(U,{}),Object(l.jsx)(mt,{}),Object(l.jsx)(W,{})]})}var Tt,Ct=n(50),yt=n(2),St=n(49),Nt=n.n(St),It={mainContentsModeIdx:0,musicList:[],entraceCode:null!==(Tt=new URLSearchParams(window.location.search).get("code"))&&void 0!==Tt?Tt:"",accessTokenNow:"",selectedMusicGenre:"pop",nameOfTitle:"Recommand",colorOfTitleBar:"#72B1C5",searchResult:"",searchBarOnOff:!1,searchBarEnterOnOff:!1,trackList:[],trackNow:{title:"",artist:"",album:"",albumImg:"",popularity:0,url:""},spotifyApi:new Nt.a({clientId:"e4ef76d98ff348cfbe2fe41f11d87279"}),myListId:"",playingListId:"",addMusicToMylist:!1,subMusicFromMylist:!1};var gt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case w.CHANGE_MAIN_CONTENTS_MODE_TO_MAIN:return Object(yt.a)(Object(yt.a)({},t),{},{mainContentsModeIdx:0,nameOfTitle:"Recommand",colorOfTitleBar:"#72B1C5",selectedMusicGenre:"pop"});case w.CHANGE_MAIN_CONTENTS_MODE_TO_GENRE:return Object(yt.a)(Object(yt.a)({},t),{},{mainContentsModeIdx:1,nameOfTitle:"Genre",colorOfTitleBar:"#7972C5"});case w.CHANGE_MAIN_CONTENTS_MODE_TO_MYLIST:return Object(yt.a)(Object(yt.a)({},t),{},{mainContentsModeIdx:2,nameOfTitle:"MyList",colorOfTitleBar:"#D96BC1"});case w.CHANGE_MAIN_CONTENTS_MODE_TO_SEARCH:return Object(yt.a)(Object(yt.a)({},t),{},{mainContentsModeIdx:t.mainContentsModeIdx,searchBarOnOff:e.payload.searchBarOnOff});case w.SET_API_ENTRACE_CODE:return Object(yt.a)(Object(yt.a)({},t),{},{entraceCode:e.payload.apiEntraceCode});case w.SET_SEARCH_RESULT:return Object(yt.a)(Object(yt.a)({},t),{},{searchResult:e.payload.searchResult});case w.SET_SEARCH_ENTER_ACTIVATED:return Object(yt.a)(Object(yt.a)({},t),{},{mainContentsModeIdx:3,searchBarEnterOnOff:!t.searchBarEnterOnOff,nameOfTitle:"search result : ".concat(t.searchResult),colorOfTitleBar:"#D96BC1",searchBarOnOff:!1});case w.SET_TRACK_LIST:return Object(yt.a)(Object(yt.a)({},t),{},{trackList:e.payload.trackList});case w.SET_ACCEES_TOKEN_NOW:return Object(yt.a)(Object(yt.a)({},t),{},{accessTokenNow:e.payload.accessTokenNow});case w.SET_MYLIST_ID:return Object(yt.a)(Object(yt.a)({},t),{},{myListId:e.payload.myListId});case w.SET_PLAYING_NOW_LIST_ID:return Object(yt.a)(Object(yt.a)({},t),{},{playingListId:e.payload.playingListId});case w.SET_ADD_MUSIC_TO_MYLIST:return Object(yt.a)(Object(yt.a)({},t),{},{addMusicToMylist:!t.addMusicToMylist});case w.SET_SUB_MUSIC_FROM_MYLIST:return Object(yt.a)(Object(yt.a)({},t),{},{subMusicFromMylist:!t.subMusicFromMylist});case w.CHOICE_MUSIC_GENRE:return Object(yt.a)(Object(yt.a)({},t),{},{selectedMusicGenre:e.payload.genre,mainContentsModeIdx:0,nameOfTitle:e.payload.nameOfTitle,colorOfTitleBar:e.payload.colorOfTitleBar});case w.CHOICE_PLAY_MUSIC_NOW:return Object(yt.a)(Object(yt.a)({},t),{},{trackNow:e.payload.trackNow})}return t},Mt=Object(Ct.a)(gt),wt=new URLSearchParams(window.location.search).get("code"),At=function(){return console.log(wt),wt?Object(l.jsx)(Et,{code:wt}):Object(l.jsx)(p,{})};var vt=function(){return Object(l.jsx)(o.a,{store:Mt,children:Object(l.jsx)(At,{})})},kt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,122)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,c=e.getLCP,r=e.getTTFB;n(t),a(t),i(t),c(t),r(t)}))};r.a.render(Object(l.jsx)(i.a.StrictMode,{children:Object(l.jsx)(vt,{})}),document.getElementById("root")),kt()},57:function(t,e,n){}},[[119,1,2]]]);
//# sourceMappingURL=main.ea9b405c.chunk.js.map